name: Archive/Unarchive Repo

on:
  issues:
    types: [opened, edited]
jobs:
  issue_flow:
    runs-on: ubuntu-latest
    strategy:  
      matrix:
        repository: ${{ fromJson(github.event.issue.body).*.repository }}  # rep01, repo02
      max-parallel: 1
    
    steps:
      - name: Extract Repository and Owner
        id: extract_repo_owner
        run: |
          # Extract repository and organization names from the issue body
          repository=${{ fromJSON(github.event.issue.body)[matrix.repository].repository }}
          owner=${{ fromJSON(github.event.issue.body)[matrix.repository].organisation }}

          # Echo repository and owner names as output
          echo "repository=$repository" >> $GITHUB_OUTPUT
          echo "owner=$owner" >> $GITHUB_OUTPUT
          
      
      - name: Output Repository and Owner
    
        run: |
          # Output the extracted repository and owner names

          
          echo "Repository: ${{ steps.extract_repo_owner.outputs.repository }}"
          echo "Owner: ${{ steps.extract_repo_owner.outputs.owner }}"
